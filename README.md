# Tobus_Backend
都営バスのリアルタイム渋滞検知Webサービスに用いたプログラムとデータです.

1. 学習データ作成パート(1回)
   DataShaping.pyを用いて，収集した都バスのデータと正解データを学習できるように整形します．
2. 学習&モデル生成パート(1回)
   
   ・選出した都バス16系統の区間について
   
   　クラスタリングを行い，8つのグループに分け(clustering.csvの区間ごとのデータからClustering.pyを用いてクラスタリング．k-means法)，グループごとに転移学習を行います．転移学習は，tensorflow.kerasを用い，小規模なneural networkを作成して実装します．(MachineLearning.py) #(論文のリンクを記載する)
   
   ・それ以外の系統については，区間ごとのデータを用いて学習を行います．

3. リアルタイムデータ整形パート：
  requestBusData.pyにて取得したデータをData.pyにて，推論可能な形にします．バス停区間の区間番号対応表(BusSectList2)を用いて，特徴量と区間番号のデータにします．
4. リアルタイムモデル推論パート：
  リアルタイムデータ整形パートにて，整形したデータを用いて，推論を行います(Backend.py)．モデルはModelsディレクトリのモデルを区間ごとに読み込み，区間ごとに推論を行います(2378区間)．出力はtrafficInfo.csvに出力され，時刻と渋滞している区間の区間番号が出力されます．
